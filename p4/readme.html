<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="" />
  <title>103 Project 4: Sorting with Lists</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  
  <style type="text/css">
  body 
  {
  	font-family:Gill Sans MT;
  	color:#657b83;
  	background-color:#fdf6e3;
  	max-width:500pt;
  	padding-left:25pt;
  	padding-right:25pt;
  	padding-bottom:20pt;
  	margin:0 auto 0 auto;
  	text-align:justify;
  }
  a:link {color:#6c71c4;}
  a:visited {color:#859900;}
  a:hover {color:#268bd2;}
  a:active {color:#d33682;}
  h1{}
  h2{border-style:solid;
   text-align:center;
  }
  h3
  {
  	margin-bottom:2pt;
  	/*color:#268bd2;*/
  	font-weight:bold;
  }
  strong
  {
  	color:#d33682;
  	font-weight:bolder;
  }
  em
  {
  	color:#268bd2;
  	font-style:italic;
  	font-weight:bolder;
  }
  code
  {
      background-color:#eee8d5;
      color:#586e75;
  }
  table.sourceCode
  {
      background-color:#eee8d5;
      color:#586e75;
  }
  pre.sourceCode
  {
      background-color:#eee8d5;
      color:#586e75;
  }
  .math
  {
      /*background-color:#eee8d5;*/
      color:#586e75;
      font-family:Times New Roman;
  }
  /*use a contextual style to undo the blue-ness:*/
  .math em
  {
      color:#586e75;
  	font-weight:normal;
  }
  .descrip
  {
  	max-width:500pt;
  	padding-left:25pt;
  	text-align:justify;
  }
  .descripbig
  {
  	max-width:575pt;
  	padding-left:0pt;
  	text-align:justify;
  }
  .emph
  {
  	color:#d33682;
  	font-weight:bolder;
  }
  .litem
  {
  	color:#268bd2;
  	font-style:italic;
  	font-weight:bolder;
  }
  .hl
  {
  	color:#268bd2;
  	font-style:italic;
  }
  .required
  {
  	color:#268bd2;
  	font-style:italic;
  	font-weight:bold;
  }
  .inputbox
  {
  	background-color:#eee8d5;
  	color:#586e75;
  	font-family:Gill Sans MT;
  	font-weight:bolder;
  }
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">103 Project 4: Sorting with Lists</h1>
<p class="author"></p>
</header>
<h3 id="due-friday-april-17th-1159pm"><em>Due:</em> Friday, April 17th @ 11:59pm</h3>
<!---{{ Synopsis-->
<h2 id="synopsis">Synopsis</h2>
<p>In this project we’ll implement <em>insertion sort</em> using a homemade (doubly-linked) linked list.</p>
<h3 id="suggested-reading">Suggested Reading</h3>
<ul>
<li><a href="https://www-cs.ccny.cuny.edu/~wes/CSC103/docs/l4.pdf">Lecture 4 from me</a></li>
</ul>
<h3 id="important-notes-on-grading">Important Notes on Grading</h3>
<p>As always,</p>
<ul>
<li>Code that does not compile will receive a 0.</li>
<li>Please follow the <a href="#submission-procedure">submission instructions</a> carefully!</li>
</ul>
<!---}}-->
<!---{{ Details-->
<h2 id="details">Details</h2>
<h3 id="doubly-linked-lists">Doubly linked lists</h3>
<p>It’s just like it sounds: our lists will not only have a pointer to the next node, but also a pointer to the previous node. This allows us to easily move through the list in both directions, which will be convenient for our application. Here’s what the node structure will look like:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">struct</span> node {</span>
<span id="cb1-2"><a href="#cb1-2"></a>    string data;</span>
<span id="cb1-3"><a href="#cb1-3"></a>    node* prev;</span>
<span id="cb1-4"><a href="#cb1-4"></a>    node* next;</span>
<span id="cb1-5"><a href="#cb1-5"></a>};</span></code></pre></div>
<h3 id="algorithm-outline">Algorithm outline</h3>
<p>There are tons of ways to perform sorting, but we will use the following strategy, usually referred to as <em>insertion sort</em>:</p>
<ol type="1">
<li>Start with an empty linked list.</li>
<li>Read a line from <code>stdin</code></li>
<li>Find the location in the list where this new value should be placed, allocate a new node, and manipulate the appropriate pointers so that it is included in the list.</li>
<li>Repeat from step 2 until <code>stdin</code> is exhausted.</li>
</ol>
<p>Finally, you should print the list to <code>stdout</code>, possibly in reverse order (depending on the command line arguments).</p>
<p><em>Note:</em> there is already a program on your computer that performs this functionality (although in a more efficient way), which unsurprisingly is named <code>sort</code>.</p>
<h3 id="command-line-arguments">Command line arguments</h3>
<p>We’ll again call on our friend <a href="http://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Options.html#Getopt-Long-Options">getopt</a> to parse arguments from the command line. Your program only needs to understand the following:</p>
<h4 id="u--unique"><code>-u,--unique</code></h4>
<p>If this option is given, you should remove duplicates from the output.</p>
<h4 id="r--reverse"><code>-r,--reverse</code></h4>
<p>If this option is given, you should print the results in reverse order. (But since we used a doubly linked list, this ought to be no problem!)</p>
<p>Note that the above options can of course be combined.</p>
<h3 id="constructors">Constructors</h3>
<p>Note that there is a <em>constructor</em> for the <code>node</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1"></a>node(string s=<span class="st">&quot;&quot;</span>, node* p=NULL, node* n=NULL) : data(s),prev(p),next(n) {}</span></code></pre></div>
<p>This lets you declare nodes and initialize them all in one step. For example, if you wanted to allocate a new node with data set to “hi” and both pointers <code>NULL</code>, just do this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1"></a>node* n = <span class="kw">new</span> node(<span class="st">&quot;hi&quot;</span>);</span></code></pre></div>
<p>The pointers of <code>*n</code> will default to <code>NULL</code> thanks to the default parameters in the constructor. And if you had <code>node</code> pointers <code>p,q</code> that you wanted to be the <code>prev</code> and <code>next</code> of your new node, do this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1"></a>node* n = <span class="kw">new</span> node(<span class="st">&quot;hi&quot;</span>,p,q);</span></code></pre></div>
<p><em>Note:</em> we used an “initializer list” in the constructor (the stuff after the <code>:</code> and before the empty <code>{}</code>). Our constructor is functionally the same as the following:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1"></a>node(string s=<span class="st">&quot;&quot;</span>, node* p=NULL, node* n=NULL)</span>
<span id="cb5-2"><a href="#cb5-2"></a>{</span>
<span id="cb5-3"><a href="#cb5-3"></a>    data = s;</span>
<span id="cb5-4"><a href="#cb5-4"></a>    prev = p;</span>
<span id="cb5-5"><a href="#cb5-5"></a>    next = n;</span>
<span id="cb5-6"><a href="#cb5-6"></a>}</span></code></pre></div>
<p>The benefit is that we avoid making an empty string <code>data</code> and then overwriting it with <code>s</code>. Instead, <code>data</code> will become <code>s</code> right from the start. Not a huge performance advantage in this case, but it can be in other situations.</p>
<h2 id="notes">Notes</h2>
<p><strong>Important:</strong> in most cases, any time you use the <code>new</code> operator, there should be a corresponding <code>delete</code> to release the memory back to the system. For this program, however, we won’t bother. Why? Because every memory allocation we make will be used for the lifetime of the program, and once our program exits, all the memory resources it was using are released by the operating system.</p>
<h2 id="testing">Testing</h2>
<p>You are actually implementing a subset of the features of the <code>sort</code> program that is already on your computer, so you already have a nice reference point for the desired behavior. Just run your <code>./sort</code> and regular <code>sort</code> with the same options and the same input, and see if the results match. Assuming you had a test file stored in <code>/tmp/file</code>, maybe use a diff program like this:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a>$ <span class="ex">vimdiff</span> <span class="op">&lt;(</span><span class="ex">./sort</span> <span class="op">&lt;</span> /tmp/file<span class="op">)</span> <span class="op">&lt;(</span><span class="fu">sort</span> <span class="op">&lt;</span> /tmp/file<span class="op">)</span></span></code></pre></div>
<p><em>Note:</em> I gave you some test data in case it is helpful. I placed 50 random words from <code>/usr/share/dict/words</code> into a file, then copied it and added some duplication. The program <code>./test.sh</code> will compare your output with that of the system’s <code>sort</code> on the files in <code>testdata/</code> and let you know what (if anything) went wrong. <strong>Important:</strong> there are a number of potentially tricky corner cases that might break your program, and <code>./test.sh</code> does not even attempt to cover them. Hence you should not get too confident just because <code>./test.sh</code> says your program passed. Take the time to think through your program carefully enough that you could <em>prove</em> it works. There is another test script called <code>reorder-test.sh</code> that <em>might</em> help find corner cases. It takes a small input with duplicates, re-orders it randomly 100 times, and prints one line per distinct output. There should only be one distinct output, which is as follows:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="ex">./reorder-test.sh</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="ex">6f1f88c0716cb6b48623a0f81b5d5e41df2a8706</span>  -</span></code></pre></div>
<p>If you see that same single line, this test also passed.</p>
<!---}}-->
<!---{{ Feeling bored?-->
<h2 id="feeling-bored">Feeling Bored?</h2>
<p>If you are in search for more of a challenge, perhaps try this: see if you can’t make a doubly linked list using the following node structure:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">struct</span> node {</span>
<span id="cb8-2"><a href="#cb8-2"></a>    string data;</span>
<span id="cb8-3"><a href="#cb8-3"></a>    node* fwdback;</span>
<span id="cb8-4"><a href="#cb8-4"></a>};</span></code></pre></div>
<p>That’s right – there’s only <em>one</em> pointer, but somehow we must be able to use it to go through the list in both directions, and without any significant penalty in terms of performance (memory or computation steps). <em>Hint:</em> remember how we were able to swap integer variables without using a temporary variable? A similar idea can help you here.</p>
<p><em>Note:</em> if you actually implement this, you might have to do some strange casting / uncasting of pointers to keep the compiler happy.</p>
<!---}}-->
<!---{{ Submission proc-->
<h2 id="submission-procedure">Submission Procedure</h2>
<p>Assuming you have the <code>postdata</code> file all set with your info,<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> just run:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a>$ <span class="bu">cd</span> ~/csc103-projects/</span>
<span id="cb9-2"><a href="#cb9-2"></a>$ <span class="ex">./submit.sh</span> p4/sort.cpp</span></code></pre></div>
<p>If you see a green message saying something about “success”, then it worked. A receipt will be stored in a file named <code>sort.cpp-rcpt.html</code>.</p>
<p><em>Note:</em> you can also use the <a href="https://www-cs.ccny.cuny.edu/~wes/CSC103/upload.html">online form</a> if that is more convenient. A few <strong>important notes:</strong></p>
<ul>
<li><em>Save the receipt.</em> You will need this to get your homework score back later from <a href="https://www-cs.ccny.cuny.edu/~wes/CSC103/download.html">the hw download page</a>.</li>
<li><em>Don’t change the filename.</em> Just edit and submit the file from the repository (in this case <code>towers.cpp</code>). If you turn a file with a different name, it will not be graded.</li>
<li><em>Respect the deadline.</em> Turning in homework past the deadline will be noticed, and may lead to a zero.</li>
</ul>
<!---}}-->
<!---{{ Links-->
<!---}}-->
<!---
% vim:ff=unix:textwidth=78:foldmethod=marker:foldmarker={{,}}
-->
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>If you need more detailed instructions on setting this up, please consult the project 1 readme.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
